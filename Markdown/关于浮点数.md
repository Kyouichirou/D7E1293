# 关于浮点数

## mysql

float类型和decimal类型在数据存储精度上的差异.

![number](https://p0.meituan.net/dpplatform/1aa2e26f66890db397559c99b8af07b023192.png)

## JavaScript

![precision](https://p0.meituan.net/dpplatform/0491c1eb5ab53c3234ea925cf400a2bc3742.png)

```JavaScript
1 === 1.000000000000001
// false
1 === 1.0000000000000001
// true
'000000000000001'.length
// 15位
```

## Python

```python
# 长度和js部分的代码一致
print(1 == 1.000000000000001)
// False
print(1 == 1.0000000000000001)
// True
```

pandas数字精度

![pandas](https://p0.meituan.net/dpplatform/6af823b4c730813de0413ad71ba6a7dc69293.png)

pandas只是展示数据修改精度(12位小数), 底层还是完整保存读取数据的精度.(暂未测试超过excel精度的文件)

Decimal

```python
from decimal import Decimal

# 注意两种方式生成数据的差异

Decimal(0.1111)
# Decimal('0.1111000000000000043076653355456073768436908721923828125')

Decimal("0.1111")
# Decimal('0.1111')
a = Decimal('0.1111')
b = Decimal('0.23')

a + b
# 执行运算得到的也是decimal类型数据
# Decimal('0.3411')
```

## mysql和python联动

```mysql
create table test(
name char(4),
nums DECIMAL(19,15)
);

insert into test values('abc', 178.621390011679);
```

```python
cursor.execute('SELECT * from test;')
cursor.fetchall()

# 得到也是decimal类型的数据
# [('abc', Decimal('178.621390011679000'))]
```

